<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MapBoxExercise</title>
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
</head>
<body>


<div id='map' style='width: 10vw; height: 98vh;'></div>
<script src="./js/keys.js"></script>
<script src="./js/mapbox-geocoder-utils.js"></script>
<script>
  mapboxgl.accessToken = mapBoxAPIKey ;

  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    zoom: 5,
    center: [-98.4916, 29.4252]
  });

  //
  // var marker = new mapboxgl.Marker()
  //         .setLngLat([-98.45251678925071,29.567244316609294])
  //         .addTo(map);
  //
  // var popup = new mapboxgl.Popup()
  //
  //         .setHTML("<img width='50px' height='auto' src='' >")
  //
  //         .addTo(map)


        var RestaurantList=  [
    {
      Name: "Hero Ramen",
      Address: "13444 West Ave STE200, San Antonio, TX 78216",

    },
    {
      Name: "Texas Roadhouse",
      Address: "16915 San Pedro Ave, Hollywood Park, TX 78232",

    },
            {
    Name:"Kumori Sushi",
     Address:'700 E Sonterra Blvd Suite #308, San Antonio, TX 78258',
            }  ]


// function findrestaurant () {
//   geocode(RestaurantList, mapBoxAPIKey).then(function (data2) {
//
//   })
// }
//     var marker = new mapboxgl.Marker()
//             .setLngLat(data)
//     .setPopup(RestaurantList)
// .addTo(map)




RestaurantList.forEach(function (restaurant){
  geocode(restaurant.Address, mapBoxAPIKey).then(function (coordinates){
    var marker = new mapboxgl.Marker()
            .setLngLat(coordinates)
            .addTo(map)

var popup = new mapboxgl.Popup()
.setHTML("<p>" + restaurant.Name + "</p>")
marker.setPopup(popup)
  })
})


  // for (let i = 0; i < RestaurantList.length ; i++) {
  //   geocode(RestaurantList[i].Address, mapBoxAPIKey).then(function (coordinates){
  //     var marker = new mapboxgl.Marker()
  //             .setLngLat(coordinates)
  //             .addTo(map)
  //
  //     var popup = new mapboxgl.Popup()
  //             .setHTML("<p>" + RestaurantList[i].Name + "</p>")
  //     marker.setPopup(popup)
  //   })
  // }

</script>


</body>
</html>
